(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64261bc2"],{"2c8b":function(t,e,a){},"92a7":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-backtop"),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("el-button-group",{class:{hasFix:t.needFix},staticStyle:{"margin-bottom":"10px","z-index":"999"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.onSave}},[t._v("保 存")]),t._v(" "),a("el-button",{on:{click:function(e){return t.goRoute("/template/list")}}},[t._v("返 回")])],1),t._v(" "),a("el-form",{ref:"dialogForm",attrs:{rules:t.formRules,model:t.formData,size:"mini","label-position":"top"}},[a("el-form-item",{attrs:{prop:"groupId",label:"组名称"}},[a("el-select",{attrs:{placeholder:"选择模板所在组"},model:{value:t.formData.groupId,callback:function(e){t.$set(t.formData,"groupId",e)},expression:"formData.groupId"}},t._l(t.groupData,(function(e){return a("el-option",{key:e.id,attrs:{label:e.groupName,value:e.id}},[t._v("\n              "+t._s(e.groupName)+"\n            ")])})),1)],1),t._v(" "),a("el-form-item",{attrs:{prop:"name",label:"模板名称"}},[a("el-input",{attrs:{"show-word-limit":"",maxlength:"64"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"folder",label:"文件目录"}},[a("el-input",{attrs:{placeholder:"为空则是模板名","show-word-limit":"",maxlength:"64"},model:{value:t.formData.folder,callback:function(e){t.$set(t.formData,"folder",e)},expression:"formData.folder"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"fileName",label:"文件名称"}},[a("el-input",{attrs:{placeholder:"可使用velocity变量","show-word-limit":"",maxlength:"100"},model:{value:t.formData.fileName,callback:function(e){t.$set(t.formData,"fileName",e)},expression:"formData.fileName"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"content",label:"模板内容"}},[a("div",{staticStyle:{display:"inline-block","margin-bottom":"5px"}},[a("el-link",{attrs:{type:"primary",underline:!1,href:"https://www.cnblogs.com/codingsilence/archive/2011/03/29/2146580.html",target:"_blank"}},[t._v("Velocity语法")]),t._v(" "),a("span",{staticClass:"split"},[t._v("|")]),t._v(" "),a("el-dropdown",{on:{command:t.changeCodeTheme}},[a("span",{staticClass:"el-dropdown-link"},[t._v("\n                代码样式"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.codeThemeList,(function(e){return a("el-dropdown-item",{attrs:{command:e}},[t._v(t._s(e))])})),1)],1),t._v(" "),a("span",{staticClass:"split"},[t._v("|")]),t._v("\n            快捷键："),t._l(t.shortcutKeyList,(function(e){return a("el-tag",{staticStyle:{"margin-right":"5px"},attrs:{effect:"plain",size:"mini"}},[t._v(t._s(e))])}))],2),t._v(" "),a("codemirror",{ref:"editor",attrs:{options:t.cmOptions},model:{value:t.formData.content,callback:function(e){t.$set(t.formData,"content",e)},expression:"formData.content"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{class:{hasFix:t.needFix},staticStyle:{"font-size":"14px"}},[a("h4",{staticStyle:{margin:"5px 0"}},[t._v("\n          Velocity变量\n          "),a("span",{staticClass:"velocity-tip"},[t._v("\n            点击变量直接插入\n          ")])]),t._v(" "),a("el-tabs",{on:{"tab-click":t.onTabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.velocityConfig,(function(t){return a("el-tab-pane",{key:t.name,attrs:{label:t.label,name:t.name,content:t}})})),1),t._v(" "),a("div",{staticClass:"velocity-var"},[a("el-tree",{attrs:{data:t.treeData,props:t.defaultProps,indent:4,accordion:""},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.data;return a("span",{},[o.children&&o.children.length>0?a("span",[t._v(t._s(o.expression))]):a("span",[a("a",{on:{click:function(e){return t.onExpressionClick(o.expression)}}},[t._v(t._s(o.expression))]),t._v("："+t._s(o.text)+"\n              ")])])}}])})],1)],1)])],1)],1)},n=[],r=a("8f94");a("bbca"),a("7ba3"),a("d2e8"),a("9c7b"),a("715d"),a("23de"),a("18fe"),a("2aed"),a("d72f"),a("b933"),a("0b6c");a("fe46");var i="gen.template.code.theme",l={components:{codemirror:r["codemirror"]},data:function(){return{groupData:[],codeThemeList:["neat","darcula","material"],shortcutKeyList:["保存(Ctrl+S)","删除当行(Ctrl+D)","复制当行(Ctrl+C)","剪切当行(Ctrl+X)","替换(Ctrl+Shift+F)"],formData:{id:0,groupId:"",groupName:"",name:"",folder:"",fileName:"",content:""},formRules:{groupId:[{required:!0,message:"不能为空",trigger:"blur"}],name:[{required:!0,message:"不能为空",trigger:"blur"}],fileName:[{required:!0,message:"不能为空",trigger:"blur"}],content:[{required:!0,message:"不能为空",trigger:"blur"}]},cmOptions:{value:"",mode:"text/velocity",theme:"neat",lineNumbers:!0,readOnly:!1},isVelocityBarFixed:!1,activeName:"java",collapseActiveName:"0",treeData:[],velocityConfig:[],defaultProps:{children:"children",label:"expression"},needFix:!1,keywordHelpShow:!1}},created:function(){var t=this.$route.params.id||0;t>0&&this.post("/template/get/".concat(t),{},(function(t){this.formData=t.data})),this.loadVelocityVar(),this.loadGroups(this.$route.query.groupId),this.cmOptions.theme=this.getAttr(i)||"neat"},mounted:function(){window.addEventListener("scroll",this.handlerScroll),this.watchKeydown()},methods:{watchKeydown:function(){var t=this;document.onkeydown=function(e){var a=window.event.keyCode;83==a&&event.ctrlKey&&(window.event.preventDefault(),t.onSave()),event.ctrlKey&&82==a&&window.event.preventDefault()}},handlerScroll:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;this.needFix=t>80},loadVelocityVar:function(){var t=this;this.getFile("velocity/java.json?q=".concat((new Date).getTime()),(function(e){t.velocityConfig.push({name:"java",label:"Java变量",data:e.data}),t.treeData=e.data})),this.getFile("velocity/csharp.json?q=".concat((new Date).getTime()),(function(e){t.velocityConfig.push({name:"csharp",label:"C#变量",data:e.data})}))},loadGroups:function(t){this.post("/group/list/",{},(function(e){this.groupData=e.data,!t&&this.groupData.length>0&&(t=this.groupData[0].id),t&&!this.formData.groupId&&(this.formData.groupId=parseInt(t))}))},onExpressionClick:function(t){var e=this.$refs.editor.codemirror;e.replaceSelection(t),e.focus()},handleNodeClick:function(t){console.log(t)},onSave:function(){var t=this;this.$refs.dialogForm.validate((function(e){if(e){var a=t.formData.id?"update":"add",o="/template/".concat(a);t.post(o,t.formData,(function(e){"add"===a&&(t.formData.id=e.data.id),t.tip("保存成功")}))}}))},onTabClick:function(t){var e=t.$attrs.content;this.treeData=e.data},changeCodeTheme:function(t){this.cmOptions.theme=t,this.setAttr(i,t)}}},s=l,c=(a("acc7"),a("2877")),d=Object(c["a"])(s,o,n,!1,null,null,null);e["default"]=d.exports},acc7:function(t,e,a){"use strict";a("2c8b")}}]);